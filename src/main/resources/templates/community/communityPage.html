<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"/>
<style>
    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }

    body {
        background-color: #131825;
    }

    a {
        text-decoration: none;
        color: #FFFFFF
    }

    .blog-footer p:last-child {
        margin-bottom: 0;
    }

    .post-header {
        margin-right: 10px;
    }

    /*게시판 표시 속성*/
    .community-category {
        .container;
        text-align: center;
        color: #FFFFFF;

        /*밑줄 그리기*/
        border-style: solid;
        border-width: 0px 0px 2px 0px;
        border-color: #1C273A;

        /*여백*/
        margin-top: 15px;
        padding-bottom: 15px;

        /*글자 설정*/
        font-size: 1.3rem;
    }

    .filtering {
        .container;
        margin-top: 15px;
    }

    .f-color-w {
        color: #FFFFFF;
        text-align: center;
    }

    .f-filter-color-b {
        color: deepskyblue;
    }

    .title-f-sort {
        text-align: left;
    }

    #post-events:hover tbody tr:hover td {
      background: lightgray;
      color: black;
    }

    td {
        border: none;
    }

    .page-link {
        background-color: #1C273A;
        border-color: #1C273A;
        color: #FFFFFF;
    }
</style>
<body class="d-flex flex-column min-vh-100">
<div th:replace="~{fragments/bodyHeader :: bodyHeader}"/>
<nav style="background-color: #1C273A">
    <!--카테고리 헤더-->
    <div class="container">
        <div class="py-1">
            <nav class="d-flex justify-content-start">
                <a class="p-2 post-header" href="announcement?page=1">공지사항</a>
                <a class="p-2 post-header" href="free?page=1">자유게시판</a>
                <a class="p-2 post-header" href="information?page=1">정보게시판</a>
                <a class="p-2 post-header" href="question?page=1">질문게시판</a>
                <a class="p-2 post-header" href="picture?page=1">사진게시판</a>
                <a class="p-2 post-header" href="trade?page=1">거래게시판</a>
            </nav>
        </div>
    </div>
</nav>
<div class="container">
    <main>
        <div class="community-category">
            <a th:text="${selectCategory.getName()}"/>
        </div>
        <!--필터링 헤더-->
        <div class="filtering">
            <a class="p-2 post-header" href="#">전체</a>
            <a class="p-2 post-header" href="#">일반</a>
            <a class="p-2 post-header" href="#">취미</a>
            <a class="p-2 post-header" href="#">게임</a>
            <a class="p-2 post-header" href="#">일상</a>
            <a class="p-2 post-header" href="#">여행</a>
        </div>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
            <button type="button" class="btn btn-primary" onclick="location.href='/community/writing'" th:text="글쓰기"/>
        </div>
    </main>
</div>
<div class="container">
    <table id="post-events" class="table f-color-w">
        <thead>
        <tr>
            <th th:width="20">분류</th>
            <th th:width="300">제목</th>
            <th th:width="30">작성자</th>
            <th th:width="50">작성일</th>
            <th th:width="20">추천</th>
            <th th:width="20">조회</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="postDto : ${pageableList.getContent()}" th:onclick="|location.href='@{/community/{category}/{id}(category=${postDto.category.getLowerCase()}, id=${postDto.id})}'|">
            <td class="f-filter-color-b">일반</td> <!--추후 변수로 받아오기로 변경 필요-->
            <td class="title-f-sort" th:text="|${postDto.title}(${postDto.getCommentCount()})|"/>
            <td th:text="${postDto.writer}"/>
            <td th:text="${#temporals.format(postDto.localDateTime, 'yyyy.MM.dd HH:mm')}"/>
            <td th:text="${postDto.likes}"/>
            <td th:text="${postDto.views}"/>
        </tr>
        </tbody>
    </table>
</div>
<div class="container">
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${pageableList.isFirst()} ? 'disabled' : ''">
                <a class="page-link" href="#" th:href="@{${selectCategory.getLowerCase()}(page=${pageableList.getNumber()-1})}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item" th:classappend="${pageableList.getNumber() == 1} ? 'active' : ''">
                <a class="page-link" th:href="@{${selectCategory.getLowerCase()}(page=1)}">1</a>
            </li>
            <li class="page-item" th:if="${pageableList.isMoreLeft()}"><a class="page-link">...</a></li>

            <li class="page-item" th:classappend="${pageableList.getNumber() == num} ? 'active' : ''" th:if="${pageableList.getTotalPage()} > 2" th:each="num : ${#numbers.sequence(pageableList.getListMin(),pageableList.getListMax())}">
                <a class="page-link" href="#" th:href="@{${selectCategory.getLowerCase()}(page=${num})}" th:text="${num}">1</a>
            </li>

            <li class="page-item" th:if="${pageableList.isMoreRight()}"><a class="page-link">...</a></li>
            <li class="page-item" th:classappend="${pageableList.getNumber() == pageableList.getTotalPage()} ? 'active' : ''" th:unless="${pageableList.isFirst()} and ${pageableList.isLast()}"><a class="page-link" th:href="@{${selectCategory.getLowerCase()}(page=${pageableList.getTotalPage()})}" th:text="${pageableList.getTotalPage()}">99</a></li>

            <li class="page-item" th:classappend="${pageableList.isLast()} ? 'disabled' : ''">
                <a class="page-link" href="#" th:href="@{${selectCategory.getLowerCase()}(page=${pageableList.getNumber()+1})}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<div class="container">
    <div class="input-group mb-3" style="width: 40%; margin: auto">
        <div>
            <select class="form-select" id="search_category">
                <option value="title" selected>제목</option>
                <option value="writer">작성자</option>
            </select>
        </div>
        <div style="margin-left: 10px; width: 300px"><input id="keyword" type="text" class="form-control" placeholder="키워드" aria-label="keywords" aria-describedby="basic-addon1"></div>
        <div style="margin-left: 10px"><button type="button" class="btn btn-primary" th:onclick="searchPost()" th:text="검색"/></div>
        <input type="hidden" id="hidden_category" th:value="${selectCategory.getLowerCase()}"/>
    </div>
</div>
<div th:replace="~{fragments/footer :: footer}"/>

<script src="/js/bootstrap.bundle.js"></script>
<script src="/js/community/searchPost.js"></script>
</body>
</html>